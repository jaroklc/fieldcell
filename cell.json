{
    "$id": "https://use.fieldcell.org/schema/v0.1.0/cell.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "description": "A fieldcell.org matrix cell schema, the basic building element for flat data representations of decision models with any number of dimensions, nesting depth, and complexity. It enables globally reusable fragments of decision data.",
    "type": "object",
    "required": [
        "cell_id",
        "coordinates",
        "payload"
    ],
    "properties": {
        "cell_id": {
            "type": "string",
            "description": "The cell's global identifier (URL)",
            "format": "uri"
        },
        "payload": {
            "type": "string",
            "description": "The Fieldcell object's text payload"
        },
        "coordinates": {
            "type": "array",
            "uniqueItems": true,
            "minItems": 3,
            "items": {
                "$ref": "#/$defs/coordinate"
            },
            "allOf": [
                {
                    "contains": {
                        "properties": {
                            "di": {
                                "const": "https://use.fieldcell.org/parent"
                            }
                        }
                    }
                },
                {
                    "contains": {
                        "properties": {
                            "di": {
                                "const": "https://use.fieldcell.org/created_at"
                            }
                        }
                    }
                },
                {
                    "contains": {
                        "properties": {
                            "di": {
                                "const": "https://use.fieldcell.org/scribe"
                            }
                        }
                    }
                }
            ]
        }
    },
    "$defs": {
        "coordinate": {
            "type": "object",
            "required": [
                "di",
                "dv"
            ],
            "properties": {
                "di": {
                    "type": "string",
                    "description": "The dimension definition's global identifier (URI)",
                    "format": "uri"
                },
                "dv": {
                    "type": "string",
                    "description": "Coordinate value associated with the coordinate dimension specified in di"
                }
            }
        }
    }
}